import{P as h,L as p,M as d,E as m,U as v}from"./userData.fLX7nSsP.js";function P(t){const o="/front_5th_chapter1-1",a={"/":d,"/login":p,"/profile":h};function c(g){history.pushState({},"",o+g),s()}function s(){const l=window.location.pathname.replace(o,"")||"/";let r=a[l];l==="/profile"&&!t.isLoggedIn()?(history.pushState({},"",o+"/login"),r=a["/login"]):l==="/login"&&t.isLoggedIn()&&(history.pushState({},"",o+"/"),r=a["/"]),r||(r=m),document.getElementById("root").innerHTML=r(t)}function f(){s(),window.addEventListener("popstate",s)}return{navigate:c,init:f}}const y=navigator.userAgent.includes("Playwright"),i=v(),n=P(i),b=()=>"/front_5th_chapter1-1",u=b();document.addEventListener("click",t=>{if(t.target.id==="logout"&&(t.preventDefault(),console.log("로그아웃"),i.logout(),n.navigate("/login")),t.target.matches('a[href^="/"]')){t.preventDefault();let e=t.target.getAttribute("href");e.startsWith(u)&&(e=e.replace(u,"")),n.navigate(e)}});document.addEventListener("submit",t=>{if(t.preventDefault(),t.target.id==="login-form"){const e=t.target.querySelector("#username").value,o=t.target.querySelector("#password").value||"";console.log("로그인:",{username:e,password:o}),e&&(i.login({username:e,email:"",bio:""}),console.log("로그인 성공"),n.navigate("/profile"))}if(t.target.id==="profile-form"){const e=t.target.querySelector("#username").value,o=t.target.querySelector("#email").value||"",a=t.target.querySelector("#bio").value||"";console.log("프로필 업데이트:",{username:e,email:o,bio:a}),e&&(i.updateProfile({username:e,email:o,bio:y?a+" "+a:a}),alert("프로필이 업데이트되었습니다!"),n.navigate("/profile"))}});n.init();
